{% extends "blog/base.html" %}

{% block content %}
  <h1>All Posts</h1>

  {% for post in posts %}
    <article style="margin-bottom: 18px;">
      <h3><a href="{% url 'post-detail' post.pk %}">{{ post.title }}</a></h3>
      <p>{{ post.content|truncatechars:160 }}</p>

      <p><small>Tags:
        {% if post.tags.exists %}
          {% for tag in post.tags.all %}
            <a href="{% url 'posts_by_tag' tag.slug %}" style="margin-right: 8px;">#{{ tag.name }}</a>
          {% endfor %}
        {% else %}
          <em>None</em>
        {% endif %}
      </small></p>
    </article>
  {% empty %}
    <p>No posts yet.</p>
  {% endfor %}
{% endblock %}
